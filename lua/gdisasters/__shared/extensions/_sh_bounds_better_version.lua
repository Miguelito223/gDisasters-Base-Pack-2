MAP_BOUNDS = {}
MAP_BOUNDS["gm_abstraction_extended"]     = { Vector(6125,6126,6074),  		Vector(-7600,-6127,-36),				Vector(0,0,0)       }
MAP_BOUNDS["gm_arid_valley_v1"]           = { Vector(12941,13415,-1972),		Vector(-14201,-14191,15061),  		Vector(0,0,-1972)       }
MAP_BOUNDS["gm_atomic"]    				  = { Vector(14533, 14630, -12790),	Vector(-14533, -14630, 700),          Vector(0,0,-12750)	    }
MAP_BOUNDS["gm_balkans"] 				  = { Vector(15343,15343,-1729),   		Vector(-15355,-15360,15003),        Vector(0,0,-2044)       }
MAP_BOUNDS["gm_bigcity"] 				  = { Vector(13172, 13171, -11393),     Vector(-13033, -13164, 2448),       Vector(0,0, -11368)      } --fix duplicate
MAP_BOUNDS["gm_bigcity_improved_lite"] 				  = { Vector(13172, 13171, -11393),     Vector(-13033, -13164, 2448),       Vector(0,0, -11368)      } --fix duplicate
MAP_BOUNDS["gm_bigcity_d"] 				  = { Vector(13172, 13171, -11393), 	Vector(-13033, -13164, 2448),       Vector(0,0, -11368)      } --fix duplicate
MAP_BOUNDS["gm_bigcity_improved"] 		  = { Vector(13172, 13171, -11393),     Vector(-13033, -13164, 2448),       Vector(0,0, -11368)      } --fix duplicate
MAP_BOUNDS["gm_bigcity_sunset"] 		  = { Vector(13172, 13171, -11393), 	Vector(-13033, -13164, 2448),       Vector(0,0, -11368)      } --fix duplicate
MAP_BOUNDS["gm_bigcity_winter"] 		  = { Vector(13172, 13171, -11393),     Vector(-13033, -13164, 2448),       Vector(0,0, -11368)      } --fix duplicate
MAP_BOUNDS["gm_blackmesa_sigma"] 		  = { Vector(10863,14447,-269), 	    Vector(-9200,-12912,5049),   	    Vector(0,0,-234)        } --fix duplicate
MAP_BOUNDS["gm_blackmesasigma_night"] 	  = { Vector(10863,14447,-269), 	    Vector(-9200,-12912,5049),   	    Vector(0,0,-234)        } --fix duplicate
MAP_BOUNDS["gm_buttes2"]	  	          = { Vector(16238,16240,-13244),		Vector(-16077,-15983,-13244),		Vector(0,0,-13244)		}
MAP_BOUNDS["gm_calamitycoast"]            = { Vector(16240,16239,-15975),      Vector(-16239,-16240,8149), 	        Vector(0,0,-15975)		}
MAP_BOUNDS["gm_calamitycoast_hl2"]        = { Vector(16240,16239,-15975),      Vector(-16239,-16240,8149), 	        Vector(0,0,-15975)		}
MAP_BOUNDS["gm_carcon_ws"]      		  = { Vector(16240,14447,-14219),      Vector(-15848,-16314,4802), 	        Vector(0,0,-14604)		}
MAP_BOUNDS["gm_chaparral"]   		      = { Vector(14320,14320,47),         Vector(-14301,-14284,14166), 	        Vector(0,0,47)			}
MAP_BOUNDS["gm_construct"]				  = { Vector(1818, 6493, -555),        Vector(-5231, -3695, 9932),          Vector(0,0,-162)		}
MAP_BOUNDS["gm_construct_15"]			  = { Vector(9168,10191,789), 			Vector(-8143,-11216,4560), 			Vector(0,0,-143)		}
MAP_BOUNDS["gm_construct_flatgrass_v6-2"] = { Vector(14303,14303,64),          Vector(-14302,-14288,10230), 		Vector(0,0,-1127)		}
MAP_BOUNDS["gm_construct_in_flatgrass"]	  = { Vector(16351,16352,-8187),		Vector(-16352,-16351,16293),			Vector(0,0,-8606)		}
MAP_BOUNDS["gm_dddesertroad"]	  		  = { Vector(15343,15344,21),			Vector(-15317,-15308,15264),			Vector(0,0,-118)		}
MAP_BOUNDS["gm_dddunefield"]			  = { Vector(15343,15343,-2459), 		Vector(-15349,-15343,5998), 		Vector(0,0,-2850)		}
MAP_BOUNDS["gm_ddustbowl2"]               = { Vector(15358, 15358, -4395),    Vector(-15322, -15348, 5737), 	    Vector(0,0,-8805)		} --fix duplicate
MAP_BOUNDS["gm_ddustbowl2_night"]         = { Vector(15358, 15358, -4395),    Vector(-15322, -15348, 5737), 	    Vector(0,0,-8805)		} --fix duplicate
MAP_BOUNDS["gm_flatbuild_pb_v02"]      	  = { Vector(15599,15414,485),          Vector(-15208,-15181,15197), 	    Vector(0,0,379)         }
MAP_BOUNDS["gm_flatbuild_pbs_2015_dev"]   = { Vector(15856,15855,-7257),        Vector(-15299,-15695,12088),			Vector(0,0,-7257)       }
MAP_BOUNDS["gm_flatgrass"] 				  = { Vector(15343,15343,-15359),       Vector(-15343,-15343, 15359), 	    Vector(0,0,-12806)		}
MAP_BOUNDS["gm_flatgrass_winter"] 		  = { Vector(15343,15343,-15359),       Vector(-15343,-15343, 15359), 	    Vector(0,0,-12806)		}
MAP_BOUNDS["gm_hugeflatgrass_v1"] 		  = { Vector(15824,15823,-15808),       Vector(-15824,-15823,-15808), 	    Vector(0,0,-15808)		}
MAP_BOUNDS["gm_flatgrass_classic"]        = { Vector(12305,-15378,-28),			Vector(-15454,12095,7168),  		Vector(0,0,-50)     	}
MAP_BOUNDS["gm_fork"]     				  = { Vector(15344,15343,-10721),       Vector(-15345,-15346,15294),         Vector(0,0,-10443)		} --fix duplicate
MAP_BOUNDS["gm_fork_night"]     		  = { Vector(15344,15344, -9300),      Vector(-15368,-15361,15278),        Vector(0,0,-10443)		} --fix duplicate
MAP_BOUNDS["gm_freespace_09_extended"]    = { Vector(15343,15343,-14271),       Vector(-15255,-15242, 8832), 	    Vector(0,0,-15124)		}
MAP_BOUNDS["gm_freespace_13"]    	      = { Vector(15855,15855,-14783),       Vector(-15501,-15761, 10583), 		Vector(0,0,-15775)		} --fix duplicate
MAP_BOUNDS["gm_freespace_13_night"]       = { Vector(15855,15855,-14783),       Vector(-15501,-15761, 10583), 		Vector(0,0,-15775)		} --fix duplicate
MAP_BOUNDS["gm_genesis"]    		      = { Vector(15104,15103,12183),	 	Vector(-15088,-15088,-8187),		Vector(0,0,-8335)		}
MAP_BOUNDS["gm_genesis_b24"]    	      = { Vector(15087,-15087,-8127),       Vector(-15121,15021,12250), 		Vector(0,0,-15263)		}
MAP_BOUNDS["gm_guadalcanal"]			  = { Vector(16255,16255,5606),			Vector(-16255,-16255,-15101),		Vector(0,0,-15242)		}
MAP_BOUNDS["gm_highway14800"]			  = { Vector(16176,15215,-4723),		Vector(-14255,-14320,11823),			Vector(0,0,-4763)		}
MAP_BOUNDS["gm_isles"]	  				  = { Vector(13325,6157,5583),			Vector(-8176,-15344,318),			Vector(0,0,12)			}
MAP_BOUNDS["gm_infinigrass"]	  		  = { Vector(15855,15855,-16251),		Vector(-15853,-15852,12965),		Vector(0,0,-16255)		}
MAP_BOUNDS["gm_lair"]	  				  = { Vector(14102,12422,7552),			Vector(-15984,-10480,-31),			Vector(0,0,0)			}
MAP_BOUNDS["gm_northwest_airfield"]       = { Vector(13157,16271,-8076),		Vector(-14164,-16275,12183),  		Vector(0,0,-8090)		}
MAP_BOUNDS["gm_ocean"]      			  = { Vector(15248,15311,-23),			Vector(-15415,-15347,9122),  		Vector(0,0,5)			}
MAP_BOUNDS["gm_rhine"]					  = { Vector(16239,16239,-15558),		Vector(-16252,-16235,11178),		Vector(0,0,-16034)		}
MAP_BOUNDS["gm_sc_tornadocounty"]         = { Vector(13295,-15344,36), 			Vector(-15344,15343,11192), 		Vector(0,0,-190)        }
MAP_BOUNDS["gm_sc_tornadoplains"]         = { Vector(15343,-15344,5), 			Vector(-15342,15340,6049), 	    	Vector(0,0,-220)        }
MAP_BOUNDS["gm_secretconstruct_v3"]       = { Vector(16240, 16240, 128),        Vector(-16240,-16240,16253), 	    Vector(0,0,61)          }
MAP_BOUNDS["gm_tornadohighway_final"]	  = { Vector(15344,13295,15),			Vector(15343,-9200,4875), 			Vector(0,0,-159)		}
MAP_BOUNDS["gm_tornadohighway_mp"]	  	  = { Vector(15344,13295,15),			Vector(15343,-9200,4875), 			Vector(0,0,-159)		}
MAP_BOUNDS["gm_tornadohighway_2014"]	  = { Vector(15344,15343,-223),		Vector(-15343,-15344,5533), 			Vector(0,0,-959)		} --fix duplicate
MAP_BOUNDS["gm_tornadohighway_2014_night"]= { Vector(15344,15343,-223),		Vector(-15343,-15344,5533), 			Vector(0,0,-959)		} --fix duplicate
MAP_BOUNDS["gm_tornadonightfall"]		  = { Vector(15344,12271,5),			Vector(15343,-12272,4589),			Vector(0,0,-380)		}
MAP_BOUNDS["gm_tornadovillage_final"]	  = { Vector(16271,16271,7075),			Vector(-16304,-16304,5),			Vector(0,0,-234)		}
MAP_BOUNDS["gm_tornado_village_beta1"]	  = { Vector(16271,16271,7075),			Vector(-16304,-16304,5),			Vector(0,0,-234)		}
MAP_BOUNDS["gm_tornado_village_beta1a"]	  = { Vector(16271,16271,7075),			Vector(-16304,-16304,5),			Vector(0,0,-234)		}
MAP_BOUNDS["gm_valley"]					  = { Vector(10223,13287,-3099),		Vector(-15579,-15676,4678), 		Vector(0,0,-3208)		}
MAP_BOUNDS["gm_vj_cityatwar"]			  = { Vector(1576,935,-8955),			Vector(-10496,-10743,6074), 			Vector(0,0,-9146)		}
MAP_BOUNDS["gm_warmap_v5"]				  = { Vector(16272,16271,-14331),		Vector(-16271,-16272,14219), 		Vector(0,0,-14331)		}
MAP_BOUNDS["gm_warmap_v5_snow"]			  = { Vector(16272,16271,-14331),		Vector(-16271,-16272,14219), 		Vector(0,0,-14331)		}
MAP_BOUNDS["phys_dmm_house"]              = { Vector(2543,3055,1947),  			Vector(-3056,-4080,-128),			Vector(0,0,-91)			}
MAP_BOUNDS["phys_temple"]                 = { Vector(2557,4094,-147),			Vector(-3433,-1865,1801),  			Vector(0,0,-117)		}
MAP_BOUNDS["phys_town_v2_fix"]      		  = { Vector(13808,-13806,-10747),     Vector(-12816,-13825,10044), 	        Vector(0,0,-12748)      }
MAP_BOUNDS["rp_downtown_v4c_v2"]		  = { Vector(4875,4179,-199), 			Vector(-5461,-7365,570),				Vector(0,0,-199)		}
MAP_BOUNDS["rp_rockford_v2b"] 			  = { Vector(15354,15226,-140),		Vector(-15098,-15326,1729),			Vector(0,0,-496)		}
MAP_BOUNDS["rp_wuste"]         			  = { Vector(15343,15344,5),		    Vector(-15360,-14966,9106),  		Vector(0,0,-432)        }
MAP_BOUNDS["gm_tornadoflatgrass"]	      = { Vector(15343,15344,-12169),       Vector(-15343,-15344,12169), 	    Vector(0,0,-17)			}
MAP_BOUNDS["gm_oceanwaves"]	     		  = { Vector(15862,1624,-8586),       	Vector(-15862,-15855,-7822), 	    Vector(0,0,-8650)		}
MAP_BOUNDS["gm_flatgrass17"]	     	  = { Vector(15855,15855,-25),       	Vector(-15855,-15855,-25),   		Vector(0,0,-25)			}
MAP_BOUNDS["gm_th_tornadobeach"]	      = { Vector(14832,15344,-809),       Vector(-14832,-15344,-809),   		Vector(0,0,-1398)		}
MAP_BOUNDS["gm_7eleven_v5"]     = { Vector(752.6, 493.1, -528),  		Vector(-4352.1, -42.4, -528),				Vector(0,0,0)       }
MAP_BOUNDS["gm_7eleven_v6"]     = { Vector(752.6, 493.1, -528),  		Vector(-4352.1, -42.4, -528),				Vector(0,0,0)       }
MAP_BOUNDS["gm_area51_rc1"]     = { Vector(4297.5, 4209.3, 36.8),  		Vector(-4127.3, -15158.3, 0),				Vector(0,0,0)       }
MAP_BOUNDS["gm_bigcity_sh"] 				  = { Vector(13172, 13171, -11393),     Vector(-13033, -13164, 2448),       Vector(0,0,-11471)      } --fix duplicate
MAP_BOUNDS["gm_bigcity_improved (no soundscapes)"] 		  = { Vector(13172, 13171, -11393),     Vector(-13033, -13164, 2448),       Vector(0,0,-11471)      }
MAP_BOUNDS["gm_combine_onslaught_v3_2"]     = { Vector(604, -52.8, 0),  		Vector(3302.6, 14.3, 0),				Vector(0,0,0)       }
MAP_BOUNDS["gm_flatgrass_classic_noded"]     = { Vector(12305,-15378,-28),			Vector(-15454,12095,7168),  		Vector(0,0,-50)        }
MAP_BOUNDS["gm_flatgrass_classic_remade"]     = { Vector(12305,-15378,-28),			Vector(-15454,12095,7168),  		Vector(0,0,-50)       }
MAP_BOUNDS["gm_flatgrass_night_exp"]     = { Vector(15343,15343,-15359),       Vector(-15343,-15343, 15359), 	    Vector(0,0,-12806)       }
MAP_BOUNDS["gm_flatgrass_water"]     = { Vector(-8096, -11509, -4925),  		Vector(8507, 11556, 6400),				Vector(0,0,-895)       }
MAP_BOUNDS["gm_flatgrass_water_v2"]     = { Vector(9233, 12049, -7167),  		Vector(-9233, -12049, 7167),				Vector(0,0,-127)       }
MAP_BOUNDS["gm_destroyable_city_001"]  = { Vector(16112, 16111, -3300), Vector(-16112, -16111, 15319), Vector(0,0,128)}
MAP_BOUNDS["gm_twister_farmland_final"]  = { Vector(15359, 15359, -7183), Vector(-15359,-15359, 7183), Vector(0,0,-248)}
MAP_BOUNDS["gm_tornado_interstate_95"]  = { Vector(16287, 16287, -7981), Vector(-16287, -16287, 7981), Vector(0, 0, -6257)}
MAP_BOUNDS["gm_tornadoalley"]  = { Vector(15343, 15338, -7167), Vector(-15300, -15331, 7167), Vector(0, 0, 0)}
MAP_BOUNDS["gm_tornadoalley_day"]  = { Vector(15343, 15338, -7167), Vector(-15300, -15331, 7167), Vector(0, 0, 0)}
MAP_BOUNDS["gm_teletubbyland_day_remake"]  = { Vector(-10415, 6267, -1887), Vector(10213, -8722, 14337), Vector(0, 0, 0)}
MAP_BOUNDS["gm_boreas"] = { Vector(15871, 15871, -15871), Vector(-15871, -15871, 15871), Vector(0, 0, -10414)}
MAP_BOUNDS["rp_clazfort"] = { Vector(8163, -13152, -13823), Vector(-11235, 13419, 13823), Vector(0, 0, -3071)}
MAP_BOUNDS["gm_constructed"] = { Vector(-14303, 14303, -16219), Vector(14303, -14303, 16219), Vector(0, 0, -22)}
MAP_BOUNDS["freespace_gs"] = { Vector(15703, -15159, -16312), Vector(-14983, 15527, 16312), Vector(0, 0, -4430)}
MAP_BOUNDS["gm_tornado_province_40"] = { Vector(16173, 16173, 128), Vector(-16173, -16173, -3984), Vector(0, 0, -8)}
MAP_BOUNDS["gm_arid_valley_v2_day"] = { Vector(-14313, 14319, -206), Vector(14319, -14319, 15482), Vector(0, 0, -206)}
MAP_BOUNDS["gm_flatgrass_2021"] = { Vector(15359, 15359, -15359), Vector(-15359, -15359, 15359), Vector(0, 0, -12914)}
MAP_BOUNDS["gm_warmap_v5"] = { Vector(16287, 16287, -14290), Vector(-16287, -16287, 14290), Vector(0, 0, -14986)}
MAP_BOUNDS["gm_warmap_v5_snow"] = { Vector(16287, 16287, -14290), Vector(-16287, -16287, 14290), Vector(0, 0, -14986)}
MAP_BOUNDS["gm_warmap_v5_night"] = { Vector(16287, 16287, -14290), Vector(-16287, -16287, 14290), Vector(0, 0, -14986)}
MAP_BOUNDS["gm_infmap"] = { Vector(16255, 16255, -16255), Vector(-16255, -16255, 16255), Vector(0, 0, -38)}
MAP_BOUNDS["gm_infmap_flatgrass"] = { Vector(16255, 16255, -16255), Vector(-16255, -16255, 16255), Vector(0, 0, -38)}
MAP_BOUNDS["gm_infmap_desert"] = { Vector(16255, 16255, -16255), Vector(-16255, -16255, 16255), Vector(0, 0, -38)}
MAP_BOUNDS["gm_infmap_ocean"] = { Vector(16255, 16255, -16255), Vector(-16255, -16255, 16255), Vector(0, 0, -38)}
MAP_BOUNDS["gm_infmap_onlygrass"] = { Vector(16255, 16255, -16255), Vector(-16255, -16255, 16255), Vector(0, 0, -38)}
MAP_BOUNDS["gm_tornadovalley_v1"] = { Vector(15359, 15871, -6143), Vector(-15359, -15871, 6143), Vector(0, 0, -503)}
MAP_BOUNDS["gm_tornadowakita"] = { Vector(16021,16048,-8200), Vector(-16202,-16175, 8200), Vector(0, 0, -253)}
MAP_BOUNDS["gm_survivethedisasters"] = { Vector(630,5288,146), Vector(-5425,-492, 3873), Vector(0, 0, 802)}
MAP_BOUNDS["gm_natural_disaster_survival_destruct2"] = { Vector(5119,5119,-4095),       Vector(-5119,-5119,4095), 	    Vector(0,0,-948)		}
MAP_BOUNDS["gm_natural_disaster_survival_destruct1"] = { Vector(5119,5119,-4095),       Vector(-5119,-5119,4095), 	    Vector(0,0,-948)		}
MAP_BOUNDS["gm_natural_disaster_survival"] = { Vector(5119,5119,-4095),       Vector(-5119,-5119,4095), 	    Vector(0,0,-948)		}

function IsMapRegistered()
	local worldEnt = #ents.FindByClass("worldspawn")
	
	if worldEnt > 0 then
		return true
	else 
		return false
	end 
end


function getMapBounds()
    if not IsMapRegistered() then
        error("This map has no bounds")
        return nil
    end
	local map = game.GetMap()

	if MAP_BOUNDS[map] then
    	return { MAP_BOUNDS[map][1], MAP_BOUNDS[map][2], MAP_BOUNDS[map][3]}
	else
		local minVector, maxVector = game.GetWorld():GetModelBounds()
		local startpos = Vector(0, 0, maxVector.z - 500)
		local traceParams = {
			start = startpos,
			endpos = minVector,
			filter = function(ent) return ent:IsWorld() end
		}
		
		local traceResult = util.TraceLine(traceParams)

		local groundPosition = traceResult.HitPos

		return { Vector(maxVector.x, maxVector.y, minVector.z), Vector(minVector.x, minVector.y, maxVector.z), groundPosition}
	end
end

function getMapCeiling()
	if IsMapRegistered()==false then error("This map no have Ceiling") return nil end 

	return getMapBounds()[2].z
end

function getMapSkyBox()
	if IsMapRegistered()==false then error("This map no have SkyBox") return nil end 
	local bounds = getMapBounds()
	local min    = bounds[1]
	local max    = bounds[2]

	return { Vector(min.x, min.y, max.z), Vector(max.x, max.y, max.z) }
end


function getMapCenterPos()
	if IsMapRegistered()==false then error("This map no have CenterPos") return nil end 

	local av         = ((getMapBounds()[1] + getMapBounds()[2])  / 2)
	return av
end

function getMapCenterFloorPos()
	if IsMapRegistered()==false then error("This map no have FloorPos") return nil end 

	return getMapBounds()[3]
end
